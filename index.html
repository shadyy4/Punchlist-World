<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Punchlist App</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>ğŸ“‹ Punchlist</h1>
    <button onclick="showForm()">â• Nuevo Ãtem</button>
    <button onclick="generatePDF()">ğŸ“„ Exportar PDF</button>
  </header>

  <!-- ğŸ“¸ Subir fotos y formulario -->
  <section id="form-section" class="hidden">
    <h2>Nuevo Ãtem</h2>
    <label>Fotos (mÃ¡x 4):</label>
    <input type="file" accept="image/*" multiple onchange="handleImages(event)" />
    <div id="image-preview"></div>

    <label>DescripciÃ³n:</label>
    <textarea id="description"></textarea>

    <label>Room:</label>
    <input type="text" id="room" />

    <label>Service:</label>
    <input type="text" id="service" />

    <label>Priority:</label>
    <select id="priority">
      <option value="1">1 - Critical Item (Safety Issue)</option>
      <option value="2">2 - Serious</option>
      <option value="3">3 - Minor</option>
      <option value="4">4 - Design Issue</option>
    </select>

    <label>Assign To:</label>
    <input type="text" id="assignTo" />

    <label>Date:</label>
    <input type="date" id="date" />

    <label>Comments:</label>
    <textarea id="comments"></textarea>

    <label>Estado:</label>
    <button id="status-btn" onclick="toggleStatus()">Pending</button>

    <button onclick="saveItem()">ğŸ’¾ Guardar</button>
    <button onclick="cancelForm()">âŒ Cancelar</button>
  </section>

  <!-- ğŸ“‹ Lista de Ã­tems -->
  <section id="list-section">
    <h2>Todos los Ã­tems</h2>

    <!-- Filtros -->
    <div class="filters">
      <select id="filter-service" onchange="applyFilters()"></select>
      <select id="filter-priority" onchange="applyFilters()"></select>
      <select id="filter-assign" onchange="applyFilters()"></select>
    </div>

    <!-- Tabla de Ã­tems -->
    <table id="items-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Room</th>
          <th>Service</th>
          <th>Priority</th>
          <th>Assign To</th>
          <th>Estado</th>
          <th>DescripciÃ³n</th>
          <th>Fotos</th>
          <th>Editar</th>
        </tr>
      </thead>
      <tbody>
        <!-- AquÃ­ se insertan los Ã­tems dinÃ¡micamente -->
      </tbody>
    </table>
  </section>

  <script src="libs/fabric.min.js"></script>
  <script src="libs/jspdf.umd.min.js"></script>
  <script src="app.js"></script>
</body>
  <!-- Modal para editar imagen -->
<div id="editor-modal" class="hidden">
  <div class="editor-container">
    <h3>ğŸ–ï¸ Editor de Imagen</h3>
    <canvas id="editor-canvas" width="500" height="400"></canvas>
    <div class="toolbar">
      <button onclick="enableFreeDraw()">âœï¸ Dibujar</button>
      <button onclick="addText()">ğŸ”¤ Texto</button>
      <input type="color" id="colorPicker" value="#ff0000" />
      <button onclick="saveEditedImage()">âœ… Guardar</button>
      <button onclick="closeEditor()">âŒ Cancelar</button>
    </div>
  </div>
</div>

</html>
